app-id: com.kraftsman.AVA
runtime: org.gnome.Platform
runtime-version: '45'
sdk: org.gnome.Sdk
command: ava
finish-args:
  # Networking for API/LLM calls and WebSocket bridge
  - --share=network
  - --share=ipc
  # Display
  - --socket=x11
  - --socket=wayland
  # Audio (Microphone for STT, Speakers for TTS)
  - --socket=pulseaudio
  - --device=all
  # Local Filesystem for Brains / Knowledge Base
  - --filesystem=home

modules:
  - name: ava
    buildsystem: simple
    build-commands:
      - install -D app /app/bin/ava
      - install -D avva-core-x86_64-unknown-linux-gnu /app/bin/avva-core-x86_64-unknown-linux-gnu
    sources:
      - type: file
        path: ui-web/src-tauri/target/release/app
      - type: file
        path: ui-web/src-tauri/sidecars/avva-core-x86_64-unknown-linux-gnu
